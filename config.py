# config.py - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞
import os
import logging
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

# –¢–æ–∫–µ–Ω –±–æ—Ç–∞
BOT_TOKEN = os.getenv('BOT_TOKEN')

# ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
ADMIN_ID = int(os.getenv('ADMIN_ID', '0'))

# –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–π
CHANNEL_ID = os.getenv('CHANNEL_ID', '')

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤ –¥–ª—è Railway
CONNECT_TIMEOUT = 30
READ_TIMEOUT = 30
WRITE_TIMEOUT = 30
POOL_TIMEOUT = 30

# –ó–Ω–∞–∫–∏ –∑–æ–¥–∏–∞–∫–∞ —Å —ç–º–æ–¥–∑–∏
ZODIAC_SIGNS = [
    ("–û–≤–µ–Ω", "‚ôà"), ("–¢–µ–ª–µ—Ü", "‚ôâ"), ("–ë–ª–∏–∑–Ω–µ—Ü—ã", "‚ôä"), ("–†–∞–∫", "‚ôã"),
    ("–õ–µ–≤", "‚ôå"), ("–î–µ–≤–∞", "‚ôç"), ("–í–µ—Å—ã", "‚ôé"), ("–°–∫–æ—Ä–ø–∏–æ–Ω", "‚ôè"),
    ("–°—Ç—Ä–µ–ª–µ—Ü", "‚ôê"), ("–ö–æ–∑–µ—Ä–æ–≥", "‚ôë"), ("–í–æ–¥–æ–ª–µ–π", "‚ôí"), ("–†—ã–±—ã", "‚ôì")
]

# –û–±—Ä–∞—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∑–Ω–∞–∫–æ–≤ –∑–æ–¥–∏–∞–∫–∞
ZODIAC_REVERSE_MAPPING = {
    "–û–≤–µ–Ω": "aries", "–¢–µ–ª–µ—Ü": "taurus", "–ë–ª–∏–∑–Ω–µ—Ü—ã": "gemini", "–†–∞–∫": "cancer",
    "–õ–µ–≤": "leo", "–î–µ–≤–∞": "virgo", "–í–µ—Å—ã": "libra", "–°–∫–æ—Ä–ø–∏–æ–Ω": "scorpio",
    "–°—Ç—Ä–µ–ª–µ—Ü": "sagittarius", "–ö–æ–∑–µ—Ä–æ–≥": "capricorn", "–í–æ–¥–æ–ª–µ–π": "aquarius", "–†—ã–±—ã": "pisces"
}
# –≠–º–æ–¥–∑–∏ –¥–ª—è —Ä–µ–∞–∫—Ü–∏–π
REACTION_EMOJIS = ['‚ù§Ô∏è', 'üëç', 'üëé', 'üòÇ', 'üò¢', 'üò°', 'ü§î', 'üôè']

# –ù–∞–∑–≤–∞–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–π
REACTION_NAMES = ['–°–µ—Ä–¥—Ü–µ', '–õ–∞–π–∫', '–î–∏–∑–ª–∞–π–∫', '–°–º–µ—Ö', '–ì—Ä—É—Å—Ç—å', '–ó–ª–æ—Å—Ç—å', '–î—É–º–∞—é', '–ú–æ–ª–∏—Ç–≤–∞']

# –°–æ–æ–±—â–µ–Ω–∏—è –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –∑–∞ —Ä–µ–∞–∫—Ü–∏–∏ (–∫–ª—é—á ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–∏)
REACTION_MESSAGES = {
    '–°–µ—Ä–¥—Ü–µ': '–°–ø–∞—Å–∏–±–æ –∑–∞ —Å–µ—Ä–¥–µ—á–∫–æ!',
    '–õ–∞–π–∫': '–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É!',
    '–î–∏–∑–ª–∞–π–∫': '–ú—ã –ø–æ—Å—Ç–∞—Ä–∞–µ–º—Å—è —Å—Ç–∞—Ç—å –ª—É—á—à–µ!',
    '–°–º–µ—Ö': '–†–∞–¥—ã, —á—Ç–æ –≤–∞–º –≤–µ—Å–µ–ª–æ!',
    '–ì—Ä—É—Å—Ç—å': '–ù–∞–¥–µ–µ–º—Å—è, —Å–ª–µ–¥—É—é—â–∏–π –ø–æ—Å—Ç –ø–æ–¥–Ω–∏–º–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ.',
    '–ó–ª–æ—Å—Ç—å': '–ú—ã —É—á—Ç—ë–º –≤–∞—à—É –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å.',
    '–î—É–º–∞—é': '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ –≤–∞—à–µ –º–Ω–µ–Ω–∏–µ!',
    '–ú–æ–ª–∏—Ç–≤–∞': '–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É!',
}

# –°–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Å–ª–æ–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
FORBIDDEN_WORDS = [w for w in os.getenv('FORBIDDEN_WORDS', 'badword1,badword2,spam').split(',') if w]

logger = logging.getLogger(__name__)


def validate_config():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
    if not BOT_TOKEN:
        raise ValueError('BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è')

    if not ADMIN_ID:
        raise ValueError('ADMIN_ID –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è')

    if not CHANNEL_ID:
        raise ValueError('CHANNEL_ID –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è')

    if not REACTION_EMOJIS or not REACTION_NAMES:
        raise ValueError('REACTION_EMOJIS –∏ REACTION_NAMES –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏')
    if len(REACTION_EMOJIS) != len(REACTION_NAMES):
        raise ValueError('REACTION_EMOJIS –∏ REACTION_NAMES –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –¥–ª–∏–Ω—ã')
    if set(REACTION_NAMES) != set(REACTION_MESSAGES.keys()):
        raise ValueError('REACTION_MESSAGES –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å REACTION_NAMES')

    masked = f'{BOT_TOKEN[:4]}...{BOT_TOKEN[-4:]}' if BOT_TOKEN else 'N/A'
    logger.info('‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ')
    logger.info('ü§ñ –¢–æ–∫–µ–Ω –±–æ—Ç–∞: %s', masked)
    logger.info('üë§ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: %s', ADMIN_ID)
    logger.info('üì¢ ID –∫–∞–Ω–∞–ª–∞: %s', CHANNEL_ID)
